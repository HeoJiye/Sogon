name: 🌿 PR이 생성 또는 업데이트될 때

on:
  pull_request:
    types: [opened, edited]

jobs:
  check-pr-branches:
    name: 🔍 dev, hotfix 브랜치만 release에 머지할 수 있다
    runs-on: ubuntu-latest

    steps:
      - name: ① PR 브랜치 검증
        env:
          BASE_BRANCH: ${{ github.event.pull_request.base.ref }}
          HEAD_BRANCH: ${{ github.event.pull_request.head.ref }}
        run: |
          if [[ "$BASE_BRANCH" == "release" ]]; then
            if [[ "$HEAD_BRANCH" != "dev" && "$HEAD_BRANCH" != "hotfix" ]]; then
              echo "⚠ dev 브랜치나 hotfix 브랜치만 release 브랜치에 머지할 수 있습니다."
              exit 1
            fi
          fi
