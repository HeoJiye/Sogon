name: ë¸Œëœì¹˜ ê²€ì¦

on:
  pull_request:
    types: [opened, synchronize, reopened, edited]

jobs:
  check-pr-branches:
    name: ğŸ” dev, hotfix ë¸Œëœì¹˜ë§Œ releaseì— ë¨¸ì§€í•  ìˆ˜ ìˆë‹¤
    runs-on: ubuntu-latest

    steps:
      - name: â‘  PR ë¸Œëœì¹˜ ê²€ì¦
        env:
          BASE_BRANCH: ${{ github.event.pull_request.base.ref }}
          HEAD_BRANCH: ${{ github.event.pull_request.head.ref }}
        run: |
          if [[ "$BASE_BRANCH" == "release" ]]; then
            if [[ "$HEAD_BRANCH" != "dev" && "$HEAD_BRANCH" != "hotfix" ]]; then
              echo "âš  dev ë¸Œëœì¹˜ë‚˜ hotfix ë¸Œëœì¹˜ë§Œ release ë¸Œëœì¹˜ì— ë¨¸ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
              exit 1
            fi
          fi

  check-pr-milestone:
    name: ğŸ” release ë¸Œëœì¹˜ë¡œì˜ PRì—ëŠ” ë§ˆì¼ìŠ¤í†¤ì´ í• ë‹¹ë˜ì–´ì•¼ í•œë‹¤
    runs-on: ubuntu-latest

    steps:
      - name: â‘  PR ë§ˆì¼ìŠ¤í†¤ ê²€ì¦
        env:
          BASE_BRANCH: ${{ github.event.pull_request.base.ref }}
          HEAD_BRANCH: ${{ github.event.pull_request.head.ref }}
          MILESTONE_TITLE: ${{ github.event.pull_request.milestone.title }}
        run: |
          if [[ "$BASE_BRANCH" == "release" && HEAD_BRANCH != 'hotfix' ]]; then
            if [ -z "$MILESTONE_TITLE" ]; then
              echo "âš  release ë¸Œëœì¹˜ë¡œì˜ PRì—ëŠ” ë§ˆì¼ìŠ¤í†¤ì´ í•„ìš”í•©ë‹ˆë‹¤."
              exit 1
            fi
          fi
