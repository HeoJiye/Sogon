name: ğŸŒ¿ PRì´ ìƒì„± ë˜ëŠ” ì—…ë°ì´íŠ¸ë  ë•Œ

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  check-pr-branches:
    name: ğŸ” dev, hotfix ë¸Œëœì¹˜ë§Œ releaseì— ë¨¸ì§€í•  ìˆ˜ ìˆë‹¤
    runs-on: ubuntu-latest

    steps:
      - name: â‘  PR ë¸Œëœì¹˜ ê²€ì¦
        run: |
          # PR ê¸°ë³¸ ë¸Œëœì¹˜ì™€ ë¨¸ì§€ ë¸Œëœì¹˜ ê°€ì ¸ì˜¤ê¸°
          PR_BASE_BRANCH="${{ github.event.pull_request.base.ref }}"
          PR_HEAD_BRANCH="${{ github.event.pull_request.head.ref }}"

          # release ë¸Œëœì¹˜ì— ë¨¸ì§€í•˜ëŠ” ê²½ìš°, dev ë¸Œëœì¹˜ë‚˜ hotfix ë¸Œëœì¹˜ê°€ ì•„ë‹ˆë©´ ì•ˆëœë‹¤
          if [[ "$PR_BASE_BRANCH" == "release" ]]; then
            if [[ "$PR_HEAD_BRANCH" != "dev" && "$PR_HEAD_BRANCH" != "hotfix" ]]; then
              echo "âš  dev ë¸Œëœì¹˜ë‚˜ hot ë¸Œëœì¹˜ë§Œ release ë¸Œëœì¹˜ì— ë¨¸ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
              exit 1
            fi
          fi
